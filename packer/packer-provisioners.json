{
    "restart": {
        "type": "windows-restart",
        "restart_timeout": "1h"
    },
    "show-banner": {
        "type": "powershell",
        "elevated_user": "vagrant",
        "elevated_password": "vagrant",
        "inline": [
            "[System.Text.Encoding]::Unicode.GetString([System.Convert]::FromBase64String(\"DQAKACAAXwBfAF8AXwBfACAAXwAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAXwAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAF8AIAAgACAAXwAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIABfAF8AIAAgACAAIAAgACAAIABfACAAIAAgACAAIAANAAoALwBfAF8AIAAgACAAXAAgAHwAXwBfACAAIABfACAAXwBfACAAXwBfAF8AIAAgAF8AXwAgAF8AfAAgAHwAXwAgACAALwBcACAAIAAvAFwAXwAgACAAIABfACAAXwAgAF8AXwAgAHwAIAB8AF8AKABfACkAXwAgAF8AXwAgACAAIABfAF8AIABfACAAIAAvACAALwAgACAAXwBfACAAXwB8ACAAfABfAF8AIAAgAA0ACgAgACAALwAgAC8AXAAvACAAJwBfACAAXAB8ACAAJwBfAF8ALwAgAF8AIABcAC8AIABfAGAAIAB8ACAAXwBfAHwALwAgAC8AXwAvACAALwAgAHwAIAB8ACAAfAAgACcAXwAgAFwAfAAgAF8AXwB8ACAAfAAgACcAXwAgAFwAIAAvACAAXwBgACAAfAAvACAALwAgACAALwAgAF8AYAAgAHwAIAAnAF8AIABcACAADQAKACAALwAgAC8AIAAgAHwAIAB8ACAAfAAgAHwAIAB8ACAAfAAgACAAXwBfAC8AIAAoAF8AfAAgAHwAIAB8AF8ALwAgAF8AXwAgACAALwB8ACAAfABfAHwAIAB8ACAAfAAgAHwAIAB8ACAAfABfAHwAIAB8ACAAfAAgAHwAIAB8ACAAKABfAHwAIAAvACAALwBfAF8AfAAgACgAXwB8ACAAfAAgAHwAXwApACAAfAANAAoAIABcAC8AIAAgACAAfABfAHwAIAB8AF8AfABfAHwAIAAgAFwAXwBfAF8AfABcAF8AXwAsAF8AfABcAF8AXwBcAC8AIAAvAF8ALwAgACAAXABfAF8ALABfAHwAXwB8ACAAfABfAHwAXABfAF8AfABfAHwAXwB8ACAAfABfAHwAXABfAF8ALAAgAFwAXwBfAF8AXwAvAFwAXwBfACwAXwB8AF8ALgBfAF8ALwAgAA0ACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAB8AF8AXwBfAC8AIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAADQAKAA0ACgAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIABiAHkAIABEAGEAcgBrAFEAdQBhAHMAYQByACwAIABhACAASgBlAGQAeQAtAGYAbABpAHAAcABpAG4AZwAtAHQAYQBiAGwAZQBzACAAZAB1AGQAZQAgACgALgBfAC4AKQAgAH4AIAA1/iAAOyUBJTslDQAKACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAA==\"))",
            "Write-Host \"                       ====================================                   \"",
            "Write-Host \"                       ==== Starting PowerShell Script ====                   \"",
            "Write-Host \"                       ====================================                   \""
        ]
    },    
    "prepare": {
        "type": "powershell",
        "elevated_user": "vagrant",
        "elevated_password": "vagrant",
        "inline": [
            "Set-ExecutionPolicy -ExecutionPolicy Bypass -Force",
            "Invoke-Expression ( Invoke-WebRequest \"https://raw.githubusercontent.com/darkquasar/cyber-tools/master/packer/scripts/provisioning/THL-Provisioner-03.ps1\" -UseDefaultCredentials )",
            "Configure-Generics-Start -NoNewWindow -Wait",
            "Start-Job -Name DisableWindowsUpdates -ScriptBlock { . A:\\THL-Provisioner-01.ps1 ; Disable-WindowsUpdates } | Wait-Job | Receive-Job -Wait",
            "Start-Job -Name InstallChocolatey -ScriptBlock { . A:\\THL-Provisioner-01.ps1 ; Install-Chocolatey } | Wait-Job | Receive-Job -Wait"
        ],
        "environment_vars": []
    },
    "process": {
        "type": "powershell",
        "elevated_user": "vagrant",
        "elevated_password": "vagrant",
        "inline": [
            ". C:/Users/vagrant/THL-Provisioner-01.ps1 ; Install-ChocoPackages",
            "Get-Job"
        ],
        "environment_vars": []
    },
    "cleanup": {}
}